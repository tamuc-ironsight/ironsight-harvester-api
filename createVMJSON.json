{
    "apiVersion": "kubevirt.io/v1",
    "kind": "VirtualMachine",
    "metadata": {
      "namespace": "default",
      "annotations": {
        "harvesterhci.io/volumeClaimTemplates": "[{\"metadata\":{\"name\":\"test-api-disk-0-xfhvn\",\"annotations\":{\"harvesterhci.io/imageId\":\"default/image-vk9x6\"}},\"spec\":{\"accessModes\":[\"ReadWriteMany\"],\"resources\":{\"requests\":{\"storage\":\"25Gi\"}},\"volumeMode\":\"Block\",\"storageClassName\":\"longhorn-image-vk9x6\"}}]",
        "network.harvesterhci.io/ips": "[]"
      },
      "labels": {
        "harvesterhci.io/creator": "harvester",
        "harvesterhci.io/os": "linux"
      },
      "name": "test-api2"
    },
    "__clone": "true",
    "spec": {
      "running": "false",
      "template": {
        "metadata": {
          "annotations": {
            "harvesterhci.io/sshNames": "[]"
          },
          "labels": {
            "harvesterhci.io/vmName": "test-api"
          }
        },
        "spec": {
          "domain": {
            "machine": {
              "type": "q35"
            },
            "cpu": {
              "cores": 4,
              "sockets": 1,
              "threads": 1
            },
            "devices": {
              "inputs": [],
              "interfaces": [
                {
                  "masquerade": {},
                  "model": "virtio",
                  "name": "default"
                }
              ],
              "disks": [
                {
                  "name": "disk-0",
                  "disk": {
                    "bus": "virtio"
                  },
                  "bootOrder": 1
                },
                {
                  "name": "cloudinitdisk",
                  "disk": {
                    "bus": "virtio"
                  }
                }
              ]
            },
            "resources": {
              "limits": {
                "memory": "4Gi",
                "cpu": 4
              }
            }
          },
          "evictionStrategy": "LiveMigrate",
          "hostname": "test-api",
          "networks": [
            {
              "pod": {},
              "name": "default"
            }
          ],
          "volumes": [
            {
              "name": "disk-0",
              "persistentVolumeClaim": {
                "claimName": "test-api-disk-0-xfhvn"
              }
            },
            {
              "name": "cloudinitdisk",
              "cloudInitConfigDrive": {
                "userData" : 	"#cloud-config\npackage_update: true\npackages:\n  - wget\nhostname: vmName\nruncmd:\n  - [ mkdir, /home/kali/elastic-setup ]\n  - [ wget, \"https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-7.16.3-linux-x86_64.tar.gz\", -O, /home/kali/elastic-setup/agent.tar.gz ]\n  - [ tar, -xvf, /home/kali/elastic-setup/agent.tar.gz, -C, /home/kali/elastic-setup/ ]\n  - [ ./home/kali/elastic-setup/elastic-agent-7.16.3-linux-x86_64/elastic-agent, install, \"-f\",\"--url=http://ssh.tylerharrison.dev:8220\", \"--enrollment-token=a1VJbXBYNEJZOEUtRnJyRlhvc0Q6U3VFZGRPcldUcW0tRzMyX2s3UmtTUQ==\", \"--insecure\" ]\nusers:\n  - default\n  - name: studentName\n    gecos: Student User\n    expiredate: '2032-09-01'\n    lock_passwd: false\n    passwd: $6$rounds=4096$Vd8W45YhfEELz1sq$HVp7eLIeJM.XOmN8o.RAwrg1UsqKpAXZBClx6uSX46j5Jwe4HN7cPdPYaKDLUVKYcAvjGTyRP3w26OrIo/.HD1"
              }
            }
          ]
        }
      }
    }
  }